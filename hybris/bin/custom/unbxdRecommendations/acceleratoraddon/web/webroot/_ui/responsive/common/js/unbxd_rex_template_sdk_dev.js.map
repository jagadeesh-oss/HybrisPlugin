{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/dot.js","webpack:///./src/environment.js","webpack:///./src/handlers/events.js","webpack:///./src/handlers/images.js","webpack:///./src/handlers/index.js","webpack:///./src/index.js","webpack:///./src/ratings.js","webpack:///./src/strikeThrough.js"],"names":["global","doT","name","version","templateSettings","evaluate","interpolate","encode","use","useParams","define","defineParams","conditional","iterate","varname","strip","append","selfcontained","doNotSkipEncoded","template","undefined","compile","log","_globals","encodeHTMLSource","encodeHTMLRules","matchHTML","code","toString","replace","m","eval","module","exports","startend","start","end","startencode","split","skip","resolveDefs","c","block","def","assign","value","indexOf","substring","param","v","arg","text","Function","s","d","rw","__exp","RegExp","unescape","tmpl","cse","needhtmlencode","sid","indv","str","elsecase","vname","iname","_encodeHTML","e","console","window","development","url","production","eventHandlers","_unbxd_recsSliderSideScroll","targetDOMId","direction","scrollAmount","elementSelector","element","document","querySelector","warn","sliderItemSelector","sliderItem","recsSlider","initialSteps","speed","itemsToScroll","_unbxd_recsItemToScrollHz","eventualSteps","tileSliderWidth","clientWidth","distance","slideTimer","setInterval","distToScroll","scrollLeft","clearInterval","prevButton","disabled","nextButton","_unbxd_recsSliderScrollNext","event","targetEl","currentTarget","parentElement","err","targetElId","id","prevButtonSelector","_unbxd_recsSliderScrollPrev","nextButtonSelector","_unbxd_recsSliderVerticalScroll","scrollWidth","_unbxd_recsSliderScrollBottom","topButtonSelector","topButton","_unbxd_recsSliderScrollTop","bottomButtonSelector","bottomButtom","sendWarning","msg","appendImagesToClass","className","imgUrl","targetContainerId","elements","querySelectorAll","i","length","img","createElement","src","appendChild","setImagesSource","imgArr","classname","fetchData","cb","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","onerror","open","send","getClosestNode","elem","selector","firstChar","charAt","parentNode","classList","contains","substr","hasAttribute","tagName","toLowerCase","MOBILE","DESKTOP","SMALL","LARGE","getDeviceType","screen","width","height","mediaQueryList","matchMedia","matches","getBrowserSize","innerWidth","innerHeight","platformDomain","environment","process","HOME_PAGE","PRODUCT_PAGE","CATEGORY_PAGE","CART_PAGE","allowedPageTypes","widgetIdMap","widget1","widget2","widget3","horizontalConfig","horizontalAssets","verticalConfig","verticalAssets","margin","sliderConfig","horizontal","containerId","sliderItemClassSelector","dimension","offsetDimension","buttonClassSelector","prevButtonClass","nextButtonClass","headingContainerId","sliderContentClass","vertical","missingValueError","valueKey","contentObject","Error","JSON","stringify","handleHorizontalWidgetClicks","parentId","clickHandler","recommendations","hzRegex","test","arrayIndex","handleVerticalWidgetClicks","parent1Id","parent2Id","recommendationsModified","vtRegex","parent1ArrayIndex","parent2ArrayIndex","handleSizeCalculations","targetDOMElementId","options","rexConsoleConfigs","itemsToShow","maxProducts","assets","sliderType","sliderClass","sliderContent","domSelector","sliderContainer","widgetWidth","ratingFeature","products","ratings_feature","ratingsFeature","sliderItems","productFields","fields","sort","b","a","sequence","sequence_number","addEventListener","target","el","fragment","createDocumentFragment","j","styles","productAttributeKey","unbxdDimensionKey","catalogKey","cssArr","Object","keys","newnode","strike_price_feature","new","field","enabled","innerHTML","strikeThrough","currency","ratingContentData","getRatingContent","k","style","recsSliderSelector","maxprodLimit","incrementCounter","counter","len","setTimeout","sliderParentContainer","sliderRootContainer","hzSliderWidth","opaqueElSelector","remove","imgs","images","forEach","call","complete","navigationButtonSelector","navigationButtons","display","prevSliderButtonSelector","prevSliderButton","classMap","horizontalAssetItem","push","tag","headingSelector","styleConfig","header","headingEl","textAlign","alignment","fontSize","size","unit","fontWeight","color","colour","_unbxd_generateRexContent","heading","visible","max","dataParser","isVertical","compressedStyle","css","widgetWidthData","widget","renderFn","renderTargetEl","getElementById","device","browserSize","itemsToShowOnMobile","visibleOnMobile","splice","slicedItems","slice","templateData","sliderOptionsConfig","_unbxd_recsItemToScrollVt","eventHandlerStyle","type","head","_unbxd_getRecommendations","context","getWidgetId","pageType","widgetKey","widgetDetails","widgetIdLocal","getPageDetails","pageInfo","pageTypeLocal","getClickHandler","itemClickHandler","getDataParserHandler","getUrlEncodedParam","paramName","paramValue","encodeURIComponent","getProductIdsAsUrlParams","productIdsList","queryStringLocal","Array","item","widgets","userInfo","userId","siteKey","apiKey","requestUrl","productIds","catlevel1Name","catlevel2Name","catlevel3Name","catlevel4Name","categoryUrl","renderWidgetDataHorizontal","max_products","horizontalTemplate","renderWidgetDataVertical","verticalTemplate","compressedStyleVertical","handleWidgetRenderingVertical","widget3Data","recommendationsResponse","widget3Heading","widgetTitle","widget3Recommendations","handleWidgetRendering","widget1Data","widget1Heading","widget1Recommendations","widget2Data","widget2Heading","widget2Recommendations","horizontalTemplateHandler","res","verticalTemplateHandler","parse","conf","templateUrlHorizontal","scriptUrl","templateUrlVertical","getRatings","rating","isNaN","result","fullStars","halfStars","emptyStars","resultString","Math","floor","getRatingValuePrefixed","recommendation","ratingConfig","prefix","styleRatingValue","prefixItemsStyles","valueItemStyles","index","stylesArr","ratingData","config","strikeConfigObj","displayPriceObj","strikeThroughObj","old","discountObj","discount","oldPrice","oldPricePrefObject","currentPrice","priceHtml","displayObjectText","displayOriginalPrice","displayDiscountText","styleStrikeThroughItems","newPrice","discountHtml","mode","discountVal","discPercent","parseFloat","toFixed","discVal","styleDiscountedLabels","strikethroughItems","strikethroughPrefixes","strikedObjConfStyles","strikedPrefixStlyes","originalItems","originalConfStyles","originalItemsPrefix","originalPrefixConfStyles","discountedLabels","discountedObjConfStyles","discountedLabelsPrefix","discountedObjPrefixConfStyles"],"mappings":"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","file":"unbxd_rex_template_sdk_dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","// doT.js\n// 2011-2014, Laura Doktorova, https://github.com/olado/doT\n// Licensed under the MIT license.\n\n(function (global) {\n\t\"use strict\";\n\n\tvar doT = {\n\t\tname: \"doT\",\n\t\tversion: \"1.1.1\",\n\t\ttemplateSettings: {\n\t\t\tevaluate:    /\\{\\{([\\s\\S]+?(\\}?)+)\\}\\}/g,\n\t\t\tinterpolate: /\\{\\{=([\\s\\S]+?)\\}\\}/g,\n\t\t\tencode:      /\\{\\{!([\\s\\S]+?)\\}\\}/g,\n\t\t\tuse:         /\\{\\{#([\\s\\S]+?)\\}\\}/g,\n\t\t\tuseParams:   /(^|[^\\w$])def(?:\\.|\\[[\\'\\\"])([\\w$\\.]+)(?:[\\'\\\"]\\])?\\s*\\:\\s*([\\w$\\.]+|\\\"[^\\\"]+\\\"|\\'[^\\']+\\'|\\{[^\\}]+\\})/g,\n\t\t\tdefine:      /\\{\\{##\\s*([\\w\\.$]+)\\s*(\\:|=)([\\s\\S]+?)#\\}\\}/g,\n\t\t\tdefineParams:/^\\s*([\\w$]+):([\\s\\S]+)/,\n\t\t\tconditional: /\\{\\{\\?(\\?)?\\s*([\\s\\S]*?)\\s*\\}\\}/g,\n\t\t\titerate:     /\\{\\{~\\s*(?:\\}\\}|([\\s\\S]+?)\\s*\\:\\s*([\\w$]+)\\s*(?:\\:\\s*([\\w$]+))?\\s*\\}\\})/g,\n\t\t\tvarname:\t\"it\",\n\t\t\tstrip:\t\ttrue,\n\t\t\tappend:\t\ttrue,\n\t\t\tselfcontained: false,\n\t\t\tdoNotSkipEncoded: false\n\t\t},\n\t\ttemplate: undefined, //fn, compile template\n\t\tcompile:  undefined, //fn, for express\n\t\tlog: true\n\t}, _globals;\n\n\tdoT.encodeHTMLSource = function(doNotSkipEncoded) {\n\t\tvar encodeHTMLRules = { \"&\": \"&#38;\", \"<\": \"&#60;\", \">\": \"&#62;\", '\"': \"&#34;\", \"'\": \"&#39;\", \"/\": \"&#47;\" },\n\t\t\tmatchHTML = doNotSkipEncoded ? /[&<>\"'\\/]/g : /&(?!#?\\w+;)|<|>|\"|'|\\//g;\n\t\treturn function(code) {\n\t\t\treturn code ? code.toString().replace(matchHTML, function(m) {return encodeHTMLRules[m] || m;}) : \"\";\n\t\t};\n\t};\n\n\t_globals = (function(){ return this || (0,eval)(\"this\"); }());\n\n\t/* istanbul ignore else */\n\tif (typeof module !== \"undefined\" && module.exports) {\n\t\tmodule.exports = doT;\n\t} else if (typeof define === \"function\" && define.amd) {\n\t\tdefine(function(){return doT;});\n\t} else {\n\t\t_globals.doT = doT;\n\t}\n\n\tvar startend = {\n\t\tappend: { start: \"'+(\",      end: \")+'\",      startencode: \"'+encodeHTML(\" },\n\t\tsplit:  { start: \"';out+=(\", end: \");out+='\", startencode: \"';out+=encodeHTML(\" }\n\t}, skip = /$^/;\n\n\tfunction resolveDefs(c, block, def) {\n\t\treturn ((typeof block === \"string\") ? block : block.toString())\n\t\t.replace(c.define || skip, function(m, code, assign, value) {\n\t\t\tif (code.indexOf(\"def.\") === 0) {\n\t\t\t\tcode = code.substring(4);\n\t\t\t}\n\t\t\tif (!(code in def)) {\n\t\t\t\tif (assign === \":\") {\n\t\t\t\t\tif (c.defineParams) value.replace(c.defineParams, function(m, param, v) {\n\t\t\t\t\t\tdef[code] = {arg: param, text: v};\n\t\t\t\t\t});\n\t\t\t\t\tif (!(code in def)) def[code]= value;\n\t\t\t\t} else {\n\t\t\t\t\tnew Function(\"def\", \"def['\"+code+\"']=\" + value)(def);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t})\n\t\t.replace(c.use || skip, function(m, code) {\n\t\t\tif (c.useParams) code = code.replace(c.useParams, function(m, s, d, param) {\n\t\t\t\tif (def[d] && def[d].arg && param) {\n\t\t\t\t\tvar rw = (d+\":\"+param).replace(/'|\\\\/g, \"_\");\n\t\t\t\t\tdef.__exp = def.__exp || {};\n\t\t\t\t\tdef.__exp[rw] = def[d].text.replace(new RegExp(\"(^|[^\\\\w$])\" + def[d].arg + \"([^\\\\w$])\", \"g\"), \"$1\" + param + \"$2\");\n\t\t\t\t\treturn s + \"def.__exp['\"+rw+\"']\";\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar v = new Function(\"def\", \"return \" + code)(def);\n\t\t\treturn v ? resolveDefs(c, v, def) : v;\n\t\t});\n\t}\n\n\tfunction unescape(code) {\n\t\treturn code.replace(/\\\\('|\\\\)/g, \"$1\").replace(/[\\r\\t\\n]/g, \" \");\n\t}\n\n\tdoT.template = function(tmpl, c, def) {\n\t\tc = c || doT.templateSettings;\n\t\tvar cse = c.append ? startend.append : startend.split, needhtmlencode, sid = 0, indv,\n\t\t\tstr  = (c.use || c.define) ? resolveDefs(c, tmpl, def || {}) : tmpl;\n\n\t\tstr = (\"var out='\" + (c.strip ? str.replace(/(^|\\r|\\n)\\t* +| +\\t*(\\r|\\n|$)/g,\" \")\n\t\t\t\t\t.replace(/\\r|\\n|\\t|\\/\\*[\\s\\S]*?\\*\\//g,\"\"): str)\n\t\t\t.replace(/'|\\\\/g, \"\\\\$&\")\n\t\t\t.replace(c.interpolate || skip, function(m, code) {\n\t\t\t\treturn cse.start + unescape(code) + cse.end;\n\t\t\t})\n\t\t\t.replace(c.encode || skip, function(m, code) {\n\t\t\t\tneedhtmlencode = true;\n\t\t\t\treturn cse.startencode + unescape(code) + cse.end;\n\t\t\t})\n\t\t\t.replace(c.conditional || skip, function(m, elsecase, code) {\n\t\t\t\treturn elsecase ?\n\t\t\t\t\t(code ? \"';}else if(\" + unescape(code) + \"){out+='\" : \"';}else{out+='\") :\n\t\t\t\t\t(code ? \"';if(\" + unescape(code) + \"){out+='\" : \"';}out+='\");\n\t\t\t})\n\t\t\t.replace(c.iterate || skip, function(m, iterate, vname, iname) {\n\t\t\t\tif (!iterate) return \"';} } out+='\";\n\t\t\t\tsid+=1; indv=iname || \"i\"+sid; iterate=unescape(iterate);\n\t\t\t\treturn \"';var arr\"+sid+\"=\"+iterate+\";if(arr\"+sid+\"){var \"+vname+\",\"+indv+\"=-1,l\"+sid+\"=arr\"+sid+\".length-1;while(\"+indv+\"<l\"+sid+\"){\"\n\t\t\t\t\t+vname+\"=arr\"+sid+\"[\"+indv+\"+=1];out+='\";\n\t\t\t})\n\t\t\t.replace(c.evaluate || skip, function(m, code) {\n\t\t\t\treturn \"';\" + unescape(code) + \"out+='\";\n\t\t\t})\n\t\t\t+ \"';return out;\")\n\t\t\t.replace(/\\n/g, \"\\\\n\").replace(/\\t/g, '\\\\t').replace(/\\r/g, \"\\\\r\")\n\t\t\t.replace(/(\\s|;|\\}|^|\\{)out\\+='';/g, '$1').replace(/\\+''/g, \"\");\n\t\t\t//.replace(/(\\s|;|\\}|^|\\{)out\\+=''\\+/g,'$1out+=');\n\n\t\tif (needhtmlencode) {\n\t\t\tif (!c.selfcontained && _globals && !_globals._encodeHTML) _globals._encodeHTML = doT.encodeHTMLSource(c.doNotSkipEncoded);\n\t\t\tstr = \"var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : (\"\n\t\t\t\t+ doT.encodeHTMLSource.toString() + \"(\" + (c.doNotSkipEncoded || '') + \"));\"\n\t\t\t\t+ str;\n\t\t}\n\t\ttry {\n\t\t\treturn new Function(c.varname, str);\n\t\t} catch (e) {\n\t\t\t/* istanbul ignore else */\n\t\t\tif (typeof console !== \"undefined\") console.log(\"Could not create a template function: \" + str);\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\tdoT.compile = function(tmpl, def) {\n\t\treturn doT.template(tmpl, null, def);\n    };\n    global.doT = doT;\n}(window));","module.exports = {\n    development: {\n        // url: 'http://localhost:4201/',\n        url: 'https://console-lohika.0126-int-use2.unbxd.io/v2.0/'\n    },\n    production: {\n        url: 'https://recommendations.unbxd.io/v2.0/'\n    }\n}\n","export var eventHandlers = {\n    // side scroll function with delayed scroll to provide smooth scroll\n    // feature across cross browsers\n    // the code inside the methods are in native javascript\n    // because they are to be appended directly in the DOM\n    _unbxd_recsSliderSideScroll: function(targetDOMId, direction) {\n        var scrollAmount = 0;\n\n        // the target selector\n        var elementSelector = \"#\" + targetDOMId + \" #_unbxd_recs-slider-container\";\n        // the element which is going to be scrolled programmatically\n        var element = document.querySelector(elementSelector);\n        if (!element) {\n            return console.warn(\"slider container id is missing. Execution can not continue\");\n        }\n        var sliderItemSelector = \"#\" + targetDOMId + \" ._unbxd_recs-slider__item\";\n        var sliderItem = document.querySelector(sliderItemSelector);\n        if (!sliderItem) {\n            return console.warn(\"slider item tile class is missing. Execution can not continue\");\n        }\n\n\n        var recsSlider = document.querySelector(\"#_unbxd_recs-slider\");\n\n        // hard coding no of steps scrolled in given time frame to produce smooth effect\n        var initialSteps = 30;\n\n        // hard coding speed along with steps for smooth transition\n        var speed = 25;\n\n        // taking the no of items to be scrolled from window\n        var itemsToScroll = window._unbxd_recsItemToScrollHz;\n\n        // an offset flag that is used around scroll limit and smoothness\n        var eventualSteps = initialSteps + itemsToScroll * 5;\n\n        // the entire width of the slider visible at once exclusive of margin\n        var tileSliderWidth = sliderItem.clientWidth * itemsToScroll;\n\n\n        // the total distance to scroll inclusive of margin. 10 is the constant margin\n        var distance = tileSliderWidth + (10 * itemsToScroll);\n\n        var slideTimer = setInterval(function () {\n            if (direction == 'left') {\n                var distToScroll = scrollAmount + eventualSteps;\n                if (distToScroll > distance) {\n                    eventualSteps -= (distToScroll - distance);\n                }\n                element.scrollLeft -= eventualSteps;\n            } else {\n                var distToScroll = scrollAmount + eventualSteps;\n                if (distToScroll > distance) {\n                    eventualSteps -= (distToScroll - distance);\n                }\n                element.scrollLeft += eventualSteps;\n            }\n            scrollAmount += eventualSteps;\n            if (scrollAmount >= distance) {\n                window.clearInterval(slideTimer);\n            }\n\n            if (element.scrollLeft === 0) {\n                // we have reached the starting position for scroll\n                // thus we need to disable the prev button for slider\n                var prevButton = document.querySelector(elementSelector +\" ._unbxd_rex-slider--prev\");\n                if (!prevButton) {\n                    return console.warn(\"_unbxd_rex-slider--prev class missing\");\n                }\n                prevButton.disabled = true;\n\n            }\n\n            if ((element.scrollLeft + element.clientWidth) === recsSlider.clientWidth) {\n                // we have reached the end position for scroll\n                // thus we need to disable the next button for slider\n                var nextButton = document.querySelector(elementSelector + \" ._unbxd_rex-slider--next\");\n                if (!nextButton) {\n                    return console.warn(\"_unbxd_rex-slider--next class missing\");\n                }\n                nextButton.disabled = true;\n            }\n        }, speed);\n    },\n\n    // horizontal slider next button\n    _unbxd_recsSliderScrollNext: function(event) {\n        // a bit clumsy. But the only way to reach out to the id of the container\n        var targetEl;\n        try {\n            targetEl = event.currentTarget.parentElement.parentElement.parentElement;\n        }\n        catch (err) {\n            console.warn(err);\n        }\n        if (!targetEl) {\n            console.warn(\"target element not found. HTML was changed\");\n            return;\n        }\n        var targetElId = targetEl.id;\n        var prevButtonSelector = \"#\" + targetElId + \" ._unbxd_rex-slider--prev\";\n        var prevButton = document.querySelector(prevButtonSelector);\n        if (!prevButton) {\n            return console.warn(\"_unbxd_rex-slider--prev class missing\");\n        }\n        if (prevButton.disabled) {\n            prevButton.disabled = false;\n        }\n        _unbxd_recsSliderSideScroll(targetElId, 'right');\n    },\n\n    // horizontal slider prev button\n    _unbxd_recsSliderScrollPrev: function() {\n        var targetEl;\n        try {\n            targetEl = event.currentTarget.parentElement.parentElement.parentElement;\n        }\n        catch (err) {\n            console.warn(err);\n        }\n        if (!targetEl) {\n            console.warn(\"target element not found. HTML was changed\");\n            return;\n        }\n        var targetElId = targetEl.id;\n        var nextButtonSelector = \"#\" + targetElId + \" ._unbxd_rex-slider--next\";\n        var nextButton = document.querySelector(nextButtonSelector);\n        if (!nextButton) {\n            return console.warn(\"_unbxd_rex-slider--next class missing\");\n        }\n        if (nextButton.disabled) {\n            nextButton.disabled = false;\n        }\n        _unbxd_recsSliderSideScroll(targetElId, 'left');\n    },\n\n    // vertical scroll function with delayed scroll to provide smooth scroll\n    // feature across cross browsers\n    // the code inside the methods are in native javascript\n    // because they are to be appended directly in the DOM\n    _unbxd_recsSliderVerticalScroll: function(targetDOMId, direction) {\n        var scrollAmount = 0;\n\n        // the target selector\n        var elementSelector = \"#\" + targetDOMId + \" #_unbxd_recs-vertical-slider-container\";\n        // the element which is going to be scrolled programmatically\n        var element = document.querySelector(elementSelector);\n        if (!element) {\n            return console.warn(\"slider container id is missing. Execution can not continue\");\n        }\n        var sliderItemSelector = \"#\" + targetDOMId + \" ._unbxd_recs-vertical-slider__item\";\n        var sliderItem = document.querySelector(sliderItemSelector);\n        if (!sliderItem) {\n            return console.warn(\"vertical slider item tile class is missing. Execution can not continue\");\n        }\n\n\n        // hard coding no of steps scrolled in given time frame to produce smooth effect\n        var initialSteps = 50;\n\n        // hard coding speed along with steps for smooth transition\n        var speed = 40;\n\n        // taking the no of items to be scrolled from window\n        var itemsToScroll = 1 //window.recsItemToScrollVt;\n\n        // an offset flag that is used around scroll limit and smoothness\n        var eventualSteps = initialSteps + itemsToScroll * 5;\n\n        // the entire width of the slider visible at once exclusive of margin\n        var tileSliderWidth = (sliderItem.clientWidth + 20) * itemsToScroll;\n\n        // the total distance to scroll inclusive of margin. 10 is the constant margin\n        var distance = tileSliderWidth;\n\n        var slideTimer = setInterval(function () {\n            if (direction == 'top') {\n                var distToScroll = scrollAmount + eventualSteps;\n                if (distToScroll > distance) {\n                    eventualSteps -= (distToScroll - distance);\n                }\n                element.scrollLeft -= eventualSteps;\n            } else {\n                var distToScroll = scrollAmount + eventualSteps;\n\n                if (distToScroll > distance) {\n                    eventualSteps -= (distToScroll - distance);\n                }\n                element.scrollLeft += eventualSteps;\n            }\n            scrollAmount += eventualSteps;\n            if (scrollAmount >= distance) {\n                window.clearInterval(slideTimer);\n            }\n\n            if (element.scrollLeft === 0) {\n                // we have reached the starting position for scroll\n                // thus we need to disable the prev button for slider\n                var prevButton = document.querySelector(\"#\"+targetDOMId+\" ._unbxd_rex-vertical-slider--top\");\n                if (!prevButton) {\n                    return console.warn(\"#\"+targetDOMId+\" _unbxd_rex-vertical-slider--top class missing\");\n                }\n                prevButton.disabled = true;\n\n            }\n\n            if ((element.clientWidth + element.scrollLeft) >= element.scrollWidth) {\n                // we have reached the end position for scroll\n                // thus we need to disable the next button for slider\n                var nextButton = document.querySelector(\"#\"+targetDOMId+ \" ._unbxd_rex-vertical-slider--bottom\");\n                if (!nextButton) {\n                    return console.warn(\"#\"+targetDOMId+ \" _unbxd_rex-vertical-slider--bottom class missing\");\n                }\n                nextButton.disabled = true;\n            }\n        }, speed);\n    },\n\n    _unbxd_recsSliderScrollBottom: function() {\n        var targetEl;\n        try {\n            targetEl = event.currentTarget.parentElement.parentElement.parentElement;\n        }\n        catch (err) {\n            console.warn(err);\n        }\n        if (!targetEl) {\n            console.warn(\"target element not found. HTML was changed\");\n            return;\n        }\n        var targetElId = targetEl.id;\n        var topButtonSelector = \"#\" + targetElId + \" ._unbxd_rex-vertical-slider--top\";\n        var topButton = document.querySelector(topButtonSelector);\n        if (!topButton) {\n            return console.warn(\"_unbxd_rex-vertical-slider--top class missing\");\n        }\n        if (topButton.disabled) {\n            topButton.disabled = false;\n        }\n        _unbxd_recsSliderVerticalScroll(targetElId, 'bottom');\n    },\n\n    _unbxd_recsSliderScrollTop: function () {\n        var targetEl;\n        try {\n            targetEl = event.currentTarget.parentElement.parentElement.parentElement;\n        }\n        catch (err) {\n            console.warn(err);\n        }\n        if (!targetEl) {\n            console.warn(\"target element not found. HTML was changed\");\n            return;\n        }\n        var targetElId = targetEl.id;\n        var bottomButtonSelector = \"#\" + targetElId + \" ._unbxd_rex-vertical-slider--bottom\";\n        var bottomButtom = document.querySelector(bottomButtonSelector);\n        if (!bottomButtom) {\n            return console.warn(\"_unbxd_rex-vertical-slider--bottom class missing\");\n        }\n        if (bottomButtom.disabled) {\n            bottomButtom.disabled = false;\n        }\n        _unbxd_recsSliderVerticalScroll(targetElId, 'top');\n    }\n}\n\n\n\nexport var sendWarning = function (msg) {\n    return console.warn(msg);\n}\n","export var appendImagesToClass = function(className,  imgUrl, targetContainerId) {\n    var elements = document.querySelectorAll(\"#\"+targetContainerId+\" .\"+className);\n    for(var i=0; i< elements.length; i++){\n        var img = document.createElement('img');\n        img.src = imgUrl;\n        elements[i].appendChild(img);\n    }\n}\n\nexport var setImagesSource = function(imgArr, targetContainerId){\n    for(var i=0; i<imgArr.length; i++){\n        appendImagesToClass(imgArr[i].classname, imgArr[i].url, targetContainerId);\n    }\n}\n","import { eventHandlers, sendWarning  } from './events';\nimport { appendImagesToClass, setImagesSource } from './images';\n\nexport { eventHandlers, appendImagesToClass, setImagesSource, sendWarning };\n","\"use strict\";\nimport './dot';\nimport { eventHandlers, setImagesSource, sendWarning } from './handlers';\nimport { getRatingContent } from './ratings';\nimport { strikeThrough } from './strikeThrough';\nimport environment from './environment';\n(function (global) {\n\n    /**\n     * Global declaration section\n     */\n\n    /** Function for fetching api requests */\n    function fetchData(url, cb) {\n        var xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = function () {\n            if (this.readyState == 4 && (this.status == 200 || this.status == 204)) {\n                // Typical action to be performed when the document is ready:\n                cb(null, xhttp.responseText);\n            }\n            else if (this.readyState == 4 && (this.status != 200 || this.status != 204)) {\n                cb('Invalid network request: ' + url);\n            }\n        };\n        xhttp.onerror = function () {\n            cb('Failed network request: ' + url);\n        }\n        xhttp.open(\"GET\", url, true);\n        xhttp.send();\n    }\n\n    /** This function find the node containing selector passed as param\n     *  closest to element passed as param \n     *  The purpose of this function is to find the target tile parent w.r.t\n     *  event target. This was done to minimize the no of click handlers\n     * */\n    function getClosestNode(elem, selector) {\n\n        var firstChar = selector.charAt(0);\n    \n        // Get closest match\n        for ( ; elem && elem !== document; elem = elem.parentNode ) {\n    \n            // If selector is a class\n            if ( firstChar === '.' ) {\n                if ( elem.classList.contains( selector.substr(1) ) ) {\n                    return elem;\n                }\n            }\n    \n            // If selector is an ID\n            if ( firstChar === '#' ) {\n                if ( elem.id === selector.substr(1) ) {\n                    return elem;\n                }\n            } \n    \n            // If selector is a data attribute\n            if ( firstChar === '[' ) {\n                if ( elem.hasAttribute( selector.substr(1, selector.length - 2) ) ) {\n                    return elem;\n                }\n            }\n    \n            // If selector is a tag\n            if ( elem.tagName.toLowerCase() === selector ) {\n                return elem;\n            }\n    \n        }\n    \n        return false;\n    \n    };\n\n    var MOBILE = 'mobile';\n    var DESKTOP = 'desktop';\n    var SMALL = 'small';\n    var LARGE = 'large';\n\n    function getDeviceType() {\n        console.log(\"screen.width: \", window.screen.width);\n        console.log(\"screen.height: \", window.screen.height);\n        const mediaQueryList = window.matchMedia(\"(orientation: portrait)\");\n        if(mediaQueryList.matches) {\n            console.log('portrait mode')\n            if (window.screen.width <= 667) {\n                return MOBILE;\n            } else {\n                return DESKTOP;\n            }\n        } else {\n            console.log('landscape mode')\n            if (window.screen.height <=667) {\n                return MOBILE;\n            } else {\n                return DESKTOP;\n            }\n        }\n    }\n\n    function getBrowserSize() {\n        console.log(\"window.innerWidth: \", window.innerWidth);\n        console.log(\"window.innerHeight: \", window.innerHeight);\n        if (window.innerWidth <= 667) {\n            return SMALL;\n        } else {\n            return LARGE;\n        }\n    }\n\n\n    /** Global variables */\n    // the domain url\n    // var platformDomain = 'http://localhost:4201/';\n    // console.log(process.env.NODE_ENV);\n    var platformDomain = environment[process.env.NODE_ENV].url;\n    // var platformDomain = 'https://console-lohika.0126-int-use2.unbxd.io/v2.0/';\n    // Constants\n    var HOME_PAGE = 'home';\n    var PRODUCT_PAGE = 'product';\n    var CATEGORY_PAGE = 'category';\n    var CART_PAGE = 'cart';\n    var allowedPageTypes = [HOME_PAGE, PRODUCT_PAGE, CATEGORY_PAGE, CART_PAGE];\n\n    var widgetIdMap = {};\n    widgetIdMap[HOME_PAGE] = {\n        'widget1': 'unbxd_rex_' + HOME_PAGE + '_w1',\n        'widget2': 'unbxd_rex_' + HOME_PAGE + '_w2',\n        'widget3': 'unbxd_rex_' + HOME_PAGE + '_w3'\n    };\n    widgetIdMap[PRODUCT_PAGE] = {\n        'widget1': 'unbxd_rex_' + PRODUCT_PAGE + '_w1',\n        'widget2': 'unbxd_rex_' + PRODUCT_PAGE + '_w2',\n        'widget3': 'unbxd_rex_' + PRODUCT_PAGE + '_w3'\n    };\n    widgetIdMap[CATEGORY_PAGE] = {\n        'widget1': 'unbxd_rex_' + CATEGORY_PAGE + '_w1',\n        'widget2': 'unbxd_rex_' + CATEGORY_PAGE + '_w2',\n        'widget3': 'unbxd_rex_' + CATEGORY_PAGE + '_w3'\n    };\n    widgetIdMap[CART_PAGE] = {\n        'widget1': 'unbxd_rex_' + CART_PAGE + '_w1',\n        'widget2': 'unbxd_rex_' + CART_PAGE + '_w2',\n        'widget3': 'unbxd_rex_' + CART_PAGE + '_w3'\n    }\n\n    // Declaration of template containers\n    var widget1;\n    var widget2;\n    var widget3;\n\n    // Horizontal template config containers\n    var horizontalConfig;\n    var horizontalAssets;\n\n    // Vertical template config containers\n    var verticalConfig;\n    var verticalAssets;\n    // Setting constant values for margin between slider items and the DOM id for the slider\n    var margin = 10;\n    /** End of Global variables */\n\n    /**\n     * End of Global declaration section\n     */\n\n    /** Scripts and styles that are appended to the DOM */\n\n    /** Adding event handlers for the horizontal slider to the DOM */\n\n\n    global._unbxd_recsSliderScrollNext = eventHandlers._unbxd_recsSliderScrollNext;\n    global._unbxd_recsSliderScrollPrev = eventHandlers._unbxd_recsSliderScrollPrev;\n    global._unbxd_recsSliderSideScroll = eventHandlers._unbxd_recsSliderSideScroll;\n\n    global._unbxd_recsSliderScrollBottom = eventHandlers._unbxd_recsSliderScrollBottom;\n    global._unbxd_recsSliderScrollTop = eventHandlers._unbxd_recsSliderScrollTop;\n    global._unbxd_recsSliderVerticalScroll = eventHandlers._unbxd_recsSliderVerticalScroll;\n\n\n\n\n    /** End of Scripts and styles that are appended to the DOM */\n\n\n    // Configuration object for vertical/horizontal sliders\n    var sliderConfig = {\n        horizontal: {\n            containerId: \" #_unbxd_recs-slider-container\",\n            sliderItemClassSelector: \" ._unbxd_recs-slider__item\",\n            dimension: \"width\",\n            offsetDimension: \"offsetWidth\",\n            buttonClassSelector: \"._unbxd_recs-slider-btn\",\n            prevButtonClass: \"_unbxd_rex-slider--prev\",\n            nextButtonClass: \"_unbxd_rex-slider--next\",\n            headingContainerId: \" #_unbxd_recs-slider-heading\",\n            sliderContentClass: \"_unbxd_recs-slider__content\"\n        },\n        vertical: {\n            containerId: \" #_unbxd_recs-vertical-slider-container\",\n            sliderItemClassSelector: \" ._unbxd_recs-vertical-slider__item\",\n            dimension: \"height\",\n            offsetDimension: \"offsetHeight\",\n            buttonClassSelector: \"._unbxd_recs-vertical-slider-btn\",\n            prevButtonClass: \"_unbxd_rex-vertical-slider--top\",\n            nextButtonClass: \"_unbxd_rex-vertical-slider--bottom\",\n            headingContainerId: \" #_unbxd_recs-vertical-slider-heading\",\n            sliderContentClass: \"_unbxd_recs-vertical-slider__content\"\n        }\n    }\n\n    function missingValueError(valueKey, contentObject) {\n        throw new Error('Error: ' + valueKey + ' not found in ' + JSON.stringify(contentObject));\n    }\n\n    function handleHorizontalWidgetClicks(parentId, clickHandler, recommendations){\n        var hzRegex = /hz-item/;\n        if (hzRegex.test(parentId)) {\n            var arrayIndex = parentId.split(\"-\")[2]; // fixed id of form hz-slider-0\n            clickHandler(recommendations[arrayIndex]);\n        }\n    }\n\n    function handleVerticalWidgetClicks(parent1Id, parent2Id, clickHandler, recommendationsModified){\n        var vtRegex = /[0-9]-vt-level2-/;\n        if (vtRegex.test(parent1Id)) {\n            var parent1ArrayIndex = parent1Id.split(\"-\")[3]; // fixed id of form *-vt-slider-0\n            var parent2ArrayIndex = parent2Id.split(\"-\")[3];\n            clickHandler(recommendationsModified[parent2ArrayIndex][parent1ArrayIndex]);\n        }\n    }\n\n    function handleSizeCalculations(targetDOMElementId, options) {\n        var rexConsoleConfigs = options.rexConsoleConfigs;\n        var recommendations = options.recommendations;\n        var clickHandler = options.clickHandler;\n        var itemsToShow = options.itemsToShow;\n        var maxProducts = options.maxProducts;\n        var assets = options.assets;\n        var sliderType = options.sliderType;\n        var sliderClass = options.sliderClass;\n        var recommendationsModified = options.recommendationsModified;\n        var sliderContent = sliderConfig[sliderType]\n        var domSelector = \"#\" + targetDOMElementId + sliderContent.containerId;\n        var sliderContainer = document.querySelector(domSelector);\n        var widgetWidth = options.widgetWidth;\n        var ratingFeature = rexConsoleConfigs.products.ratings_feature || rexConsoleConfigs.products.ratingsFeature;\n\n        if (!sliderContainer) {\n            return sendWarning('The slider container id was not found. Script can not continue');\n        }\n\n        var sliderItemSelector = \"#\" + targetDOMElementId + sliderContent.sliderItemClassSelector;\n        var sliderItems = document.querySelectorAll(sliderItemSelector);\n\n        if (!sliderItems.length) {\n            return sendWarning('Found 0 nodes with class : ' + sliderContent.sliderItemClassSelector);\n        }\n\n        var productFields = rexConsoleConfigs.products.fields || missingValueError('products.fields', rexConsoleConfigs);\n\n        productFields = productFields.sort(function(b,a){\n           a.sequence = a.sequence || a.sequence_number;\n           b.sequence = b.sequence || b.sequence_number;\n           if(a.sequence  < b.sequence){\n               return 1;\n           }\n           return -1;\n        });\n\n        var dimension = sliderContent.dimension;\n\n        if (clickHandler) {\n            if (sliderContent.dimension == \"width\") {\n                sliderContainer.addEventListener(\"click\", function (event) {\n                    if (event.target.className == \"_unbxd_recs-slider__item\"){\n                        handleHorizontalWidgetClicks(event.target.id, clickHandler, recommendations);\n                    }\n                    else{\n                        var el = getClosestNode(event.target,\"._unbxd_recs-slider__item\")\n                        handleHorizontalWidgetClicks(el.id, clickHandler, recommendations);\n                    }\n                });\n            }\n            else {\n                sliderContainer.addEventListener(\"click\", function (event) {                \n                    if(event.target.className == \"_unbxd_recs-vertical-slider__item\"){\n                        var parentId = event.target.parentElement.id;\n                        handleVerticalWidgetClicks(event.target.id, parentId, clickHandler, recommendationsModified);\n                    }\n                    else{\n                        var el = getClosestNode(event.target,\"._unbxd_recs-vertical-slider__item\");\n                        var parentId = el.parentElement.id;\n                        handleVerticalWidgetClicks(el.id, parentId, clickHandler, recommendationsModified);\n                    }\n                });\n            }\n        }\n\n        for (var i = 0; i < sliderItems.length; i++) {\n            var fragment = document.createDocumentFragment();\n            for (var j = 0; j < productFields.length; j++) {\n                var styles = productFields[j].styles || missingValueError('styles', productFields[j]);\n                var productAttributeKey = productFields[j].unbxdDimensionKey || productFields[j].catalogKey || missingValueError('unbxdDimensionKey or catalogKey', productFields[j]);\n                var cssArr = Object.keys(styles);\n                if(!recommendations[i][productAttributeKey]){\n                    productAttributeKey = productFields[j].catalogKey;\n                }\n                // appending fields to slider item\n                // field appending doesn't applies to imageUrl\n                if (productAttributeKey != \"imageUrl\") {\n                    var newnode = document.createElement(\"p\");\n                    var dimension = recommendations[i][productAttributeKey];\n                    newnode.className = sliderContent.sliderContentClass;\n                    if(rexConsoleConfigs.products.strike_price_feature && productAttributeKey == rexConsoleConfigs.products.strike_price_feature.new.field){\n                        if(rexConsoleConfigs.products.strike_price_feature.enabled){\n                            newnode.innerHTML = strikeThrough(recommendations[i], rexConsoleConfigs, domSelector);\n                        }\n                        else{\n                            newnode.innerHTML = rexConsoleConfigs.products.currency+ dimension;\n                        }\n                    }\n                    else if(ratingFeature &&\n                        ratingFeature.enabled &&\n                        productFields[j].unbxdDimensionKey &&\n                        productFields[j].unbxdDimensionKey.toLowerCase() == \"rating\" ){\n                        var ratingContentData = getRatingContent(recommendations[i], ratingFeature, domSelector, productAttributeKey);\n                        if(ratingContentData){\n                            newnode.innerHTML = ratingContentData;\n                        }\n                    }\n                    else {\n                        if (!dimension) {\n                            newnode.innerHTML = \"\";\n                        }\n                        else {\n                            newnode.innerHTML = dimension;\n                        }\n                    }\n\n                    if (newnode.innerHTML) {\n                        for(var k=0; k< cssArr.length; k++){\n                            newnode.style[cssArr[k]] = styles[cssArr[k]];\n                        }\n                        fragment.appendChild(newnode);\n                    }\n                }\n            }\n\n            sliderItems[i].appendChild(fragment);\n        }\n\n        // Setting width of each slider item and\n        // setting width of the visible slider\n        var recsSliderSelector = \"#\" + targetDOMElementId + \" .\" + sliderClass;\n        var recsSlider = document.querySelector(recsSliderSelector);\n        if (!recsSlider) {\n            return sendWarning('Slider Parent id was not found in the DOM');\n        }\n\n        var maxprodLimit = maxProducts;\n        if (recommendations.length < maxProducts) {\n            maxprodLimit = recommendations.length\n        }\n\n        function incrementCounter() {\n            counter++;\n            if (counter === len) {\n                if (sliderContent.dimension == \"width\") {\n\n                    setTimeout(function () {\n                        var sliderParentContainer = document.querySelector(\"#\" + targetDOMElementId + \" .unbxd-recs-slider\");\n                        var sliderRootContainer = sliderParentContainer.parentElement;\n                        sliderParentContainer.style.width = widgetWidth || \"initial\";\n                        if (sliderRootContainer.clientWidth < sliderParentContainer.clientWidth) {\n                            sliderParentContainer.style.width = sliderRootContainer.clientWidth + \"px\";\n                        }\n                        sliderContainer.style.width = sliderContainer[sliderContent.offsetDimension] + \"px\";\n                        var hzSliderWidth = (sliderContainer[sliderContent.offsetDimension] - (itemsToShow * margin)) / itemsToShow;\n                        for (i = 0; i < sliderItems.length; i++) {\n                            sliderItems[i].style.width = hzSliderWidth + \"px\";\n                            recsSlider.style.width = (maxprodLimit * hzSliderWidth) + (maxprodLimit) * margin + \"px\";\n                        }\n                        var opaqueElSelector = document.querySelector(\"#\"+targetDOMElementId + \" ._unxbd_slider_hide\");\n                        opaqueElSelector.classList.remove(\"_unxbd_slider_hide\");\n                       \n                    }, 0);\n                \n                }\n                else {\n\n                    setTimeout(function () {\n                        var sliderParentContainer = document.querySelector(\"#\" + targetDOMElementId + \" ._unbxd_vertical-recs-slider\");\n                        var sliderRootContainer = sliderParentContainer.parentElement;\n                        // if root container width is less than configuration width, then\n                        // the container inherits root container width \n                        sliderParentContainer.style.width = widgetWidth || \"initial\";\n                        if(sliderRootContainer.clientWidth < sliderParentContainer.clientWidth){\n                            sliderParentContainer.style.width = sliderRootContainer.clientWidth + \"px\";\n                        }\n                        for (i = 0; i < sliderItems.length; i++) {\n                            sliderItems[i].style.width = sliderParentContainer.clientWidth - 2 * margin + \"px\";\n                        }\n                        recsSlider.style.width = (sliderParentContainer.clientWidth) * recommendationsModified.length + \"px\";\n                        var opaqueElSelector = document.querySelector(\"#\"+targetDOMElementId + \" ._unxbd_slider_hide\");\n                        opaqueElSelector.classList.remove(\"_unxbd_slider_hide\");\n                    }, 0);\n                 \n                }\n               \n            }\n        }\n\n        var imgs = document.images,\n            len = imgs.length,\n            counter = 0;\n\n        [].forEach.call(imgs, function (img) {\n            if (img.complete)\n                incrementCounter();\n            else\n                img.addEventListener('load', incrementCounter, false);\n        });\n\n\n        /** Setting styles for carousel buttons */\n        // the navigation button need to be hidden in case the total no of items to be shown\n        // are less than the no of items to be shown at in one slide \n        if (recommendations.length <= itemsToShow) {\n            var navigationButtonSelector = \"#\" + targetDOMElementId + \" \" + sliderContent.buttonClassSelector;\n            var navigationButtons = document.querySelectorAll(navigationButtonSelector);\n            if (!navigationButtons || !navigationButtons.length) {\n                return sendWarning(sliderContent.buttonClassSelector + 'class not found on navigation buttons');\n            }\n            for (var i = 0; i < navigationButtons.length; i++) {\n                navigationButtons[i].style.display = 'none';\n            }\n        }\n\n        // the previous button for the slider needs to be disabled initially\n        var prevSliderButtonSelector = \"#\" + targetDOMElementId + \" .\" + sliderContent.prevButtonClass;\n        var prevSliderButton = document.querySelector(prevSliderButtonSelector);\n\n        if (!prevSliderButton) {\n            return sendWarning(sliderContent.prevButtonClass + ' class was not found on the navigation buttons');\n        }\n        prevSliderButton.disabled = true;\n\n        /** Setting images value */\n        var imgArr = [];\n        var classMap = {\n            \"next_arrow\": sliderContent.nextButtonClass,\n            \"prev_arrow\": sliderContent.prevButtonClass,\n            \"empty_rating\": \"_unbxd_rex-empty-star\",\n            \"half_rating\": \"_unbxd_rex-half-star\",\n            \"full_rating\": \"_unbxd_rex-full-star\"\n        }\n        for (i = 0; i < assets.length; i++) {\n            var horizontalAssetItem = assets[i];\n            imgArr.push(\n                {\n                    classname: classMap[horizontalAssetItem.tag],\n                    url: horizontalAssetItem.src\n                }\n            );\n        }\n        setImagesSource(imgArr, targetDOMElementId);\n\n        /** Setting images value end*/\n\n        /** Setting styles for heading */\n\n        var headingSelector = \"#\" + targetDOMElementId + sliderContent.headingContainerId;\n        var styleConfig = rexConsoleConfigs.header;\n        var headingEl = document.querySelector(headingSelector);\n        if (headingEl.innerHTML == \"null\" || headingEl.innerHTML == \"undefined\") {\n            headingEl.style.display = \"none\";\n        }\n        else {\n            headingEl.style.textAlign = styleConfig.alignment;\n            headingEl.style.fontSize = styleConfig.text.size.value + styleConfig.text.size.unit;\n            headingEl.style.fontWeight = styleConfig.text.style;\n            headingEl.style.color = styleConfig.text.colour;\n        }\n\n        /** End of Setting styles for heading */\n    }\n\n    /** exporting a global function to initialize recs slider */\n    global._unbxd_generateRexContent = function (options) {\n        // console.log(options)\n        /** Template rendering logic */\n        var template = options.template || missingValueError('template', options);\n        var targetDOMElementId = options.targetDOMElementId || missingValueError('targetDOMElementId', options);\n        var recommendations = options.recommendations || missingValueError('recommendations', options);\n        var heading = options.heading || missingValueError('heading', options);\n        var rexConsoleConfigs = options.rexConsoleConfigs || missingValueError('rexConsoleConfigs', options);\n        var itemsToShow = rexConsoleConfigs.products.visible || missingValueError('products.visible', rexConsoleConfigs);\n        var maxProducts = rexConsoleConfigs.products.max || missingValueError('products.max', rexConsoleConfigs.products);\n        var clickHandler = options.clickHandler;\n        var dataParser = options.dataParser;\n        var isVertical = options.isVertical;\n        var compressedStyle = rexConsoleConfigs.css || missingValueError('css',rexConsoleConfigs);\n        var recommendationsModified = null;\n        var widgetWidthData = rexConsoleConfigs.widget.width || missingValueError('products.widget.width', rexConsoleConfigs.widget);\n        // var widgetWidthData = verticalConfig.width;\n        var widgetWidth = \"\";\n        if (widgetWidthData.value && widgetWidthData.value != 0) {\n            widgetWidth = widgetWidthData.value + widgetWidthData.unit;\n        }\n\n        var renderFn = doT.template(template);\n        var renderTargetEl = document.getElementById(targetDOMElementId);\n\n        // console.log(screen.width)\n        // console.log(window.innerWidth);\n        var device = getDeviceType();\n        var browserSize = getBrowserSize();\n        if (device === MOBILE || browserSize === SMALL) {\n            const itemsToShowOnMobile = rexConsoleConfigs.products.visibleOnMobile;\n            itemsToShow = itemsToShowOnMobile ? itemsToShowOnMobile : 2;\n        }\n \n        if (!renderTargetEl) {\n            return sendWarning('The target element id <' + targetDOMElementId + '> is not present in DOM. Execution can not continue');\n        }\n\n        if (maxProducts < recommendations.length) {\n            recommendations = recommendations.splice(0, maxProducts);\n        }\n\n        if (isVertical) {\n            recommendationsModified = [];\n            for (var i = 0; i < recommendations.length; i++) {\n                if (i % (itemsToShow) === 0) {\n                    var slicedItems = recommendations.slice(i, i + itemsToShow);\n                    recommendationsModified.push(slicedItems);\n                }\n            }\n        }\n\n        var templateData = {\n            recommendations: recommendationsModified || recommendations,\n            heading: heading\n        }\n\n        /* Callback to make any modification to data and pass on the modified data to renderFn  */\n        if (dataParser && typeof(dataParser) === \"function\") {\n            templateData = dataParser(templateData)\n         }\n\n        document.getElementById(targetDOMElementId).innerHTML = renderFn(templateData);\n\n        /** Dynamically adjusting width based on no of items to be shown */\n        var sliderOptionsConfig = {\n            rexConsoleConfigs: rexConsoleConfigs,\n            recommendations: recommendations,\n            recommendationsModified: recommendationsModified,\n            clickHandler: clickHandler,\n            itemsToShow: itemsToShow,\n            maxProducts: maxProducts,\n            assets: options.assets,\n            sliderType: isVertical ? \"vertical\" : \"horizontal\",\n            sliderClass: isVertical ? \"_unbxd_recs-vertical-slider\" : \"_unbxd_recs-slider\",\n            widgetWidth: widgetWidth\n        }\n\n        // no of items to be shown\n        if (isVertical) {\n            global._unbxd_recsItemToScrollVt = itemsToShow;\n        }\n        else {\n            global._unbxd_recsItemToScrollHz = itemsToShow;\n        }\n\n\n            /** Attaching styles for the slider */\n        var eventHandlerStyle = document.createElement('style');\n        eventHandlerStyle.type = 'text/css';\n        // innerHTML needs to stay as es5 since it will be embedded directly to client's browser\n        eventHandlerStyle.innerHTML = compressedStyle;\n        document.head.appendChild(eventHandlerStyle);\n\n        handleSizeCalculations(targetDOMElementId, sliderOptionsConfig);\n    }\n\n\n    /** The initialization function that has to be exposed to the merchandiser website\n        *  it takes context object from the client html\n        *  and makes a call to the recommender proxy\n        *  and updates the dom as per the response\n        */\n    global._unbxd_getRecommendations = function (context) {\n        // Get widget id\n        function getWidgetId(pageType, widgetKey, widgetDetails) {\n            console.log(pageType, widgetKey, widgetDetails)\n            var widgetIdLocal;\n            if (widgetDetails) {\n                return widgetDetails[widgetKey] ? widgetDetails[widgetKey].name : null;\n            } else {\n                widgetIdLocal = widgetIdMap[pageType.toLowerCase()][widgetKey];\n                // Check if widget exists in the page\n                if (document.getElementById(widgetIdLocal)) {\n                    return widgetIdLocal;\n                } else {\n                    return null;\n                }\n            }\n            return null;\n        }\n\n        function getPageDetails(pageInfo) {\n            if (!pageInfo || !pageInfo.pageType) {\n                throw new Error(\"Page type info missing\");\n            }\n            var pageTypeLocal = pageInfo.pageType;\n            if (allowedPageTypes.indexOf(pageTypeLocal.toLowerCase()) == -1) {\n                throw new Error(\"Invalid value for page type\");\n            }\n            return pageTypeLocal;\n        }\n\n        function getClickHandler(context) {\n            return context.itemClickHandler;\n        }\n\n        function getDataParserHandler(context) {\n            return context.dataParser;\n        }\n\n        function getUrlEncodedParam(paramName, paramValue) {\n            return \"\" + paramName + \"=\" + encodeURIComponent(paramValue);\n        }\n\n        function getProductIdsAsUrlParams(productIdsList) {\n            var queryStringLocal = '';\n            if (productIdsList instanceof Array) {\n                productIdsList.forEach(function (item) {\n                    queryStringLocal += '&' + getUrlEncodedParam('id', item);\n                });\n            } else {\n                queryStringLocal += '&' + getUrlEncodedParam('id', productIdsList);\n            }\n            return queryStringLocal;\n        }\n\n        // getting page info\n        var pageType = getPageDetails(context.pageInfo);\n\n        // get widget if\n        var widgets = context.widgets;\n        widget1 = getWidgetId(pageType, 'widget1', widgets);\n        widget2 = getWidgetId(pageType, 'widget2', widgets);\n        widget3 = getWidgetId(pageType, 'widget3', widgets);\n        if (!widget1 && !widget2 && !widget3) {\n            throw new Error('No widget id provided');\n        }\n        var itemClickHandler = getClickHandler(context);\n        var dataParser = getDataParserHandler(context);\n\n        // getting userId, siteKey and apiKey\n        var userInfo = context.userInfo;\n        if (!userInfo) {\n            throw new Error(\"User info missing\")\n        }\n\n        var userId = userInfo.userId;\n        var siteKey = userInfo.siteKey;\n        var apiKey = userInfo.apiKey;\n\n        var requestUrl = platformDomain + apiKey + \"/\" + siteKey + '/items?&template=true&pageType=';\n\n        if (!userId) {\n            throw new Error(\"user id is missing\");\n        }\n\n        if (!siteKey) {\n            throw new Error(\"site Key is missing\");\n        }\n\n        if (!apiKey) {\n            throw new Error(\"api key is missing\");\n        }\n\n        requestUrl += encodeURIComponent(pageType);\n        var pageInfo = context.pageInfo;\n        switch (pageType.toLowerCase()) {\n            case PRODUCT_PAGE:\n            case CART_PAGE:\n                if (!pageInfo.productIds) {\n                    throw new Error(\"product id is missing for page type:\" + pageType);\n                }\n                requestUrl += getProductIdsAsUrlParams(pageInfo.productIds);\n                break;\n            case CATEGORY_PAGE:\n                var catlevel1Name = pageInfo.catlevel1Name;\n                if (!catlevel1Name) {\n                    throw new Error(\"catlevel1Name is mandatory for page type:\" + pageType);\n                }\n                var catlevel2Name = pageInfo.catlevel2Name;\n                var catlevel3Name = pageInfo.catlevel3Name;\n                var catlevel4Name = pageInfo.catlevel4Name;\n                var categoryUrl = \"&\" + getUrlEncodedParam(\"catlevel1Name\", catlevel1Name);\n                if (catlevel2Name) {\n                    categoryUrl += \"&\" + getUrlEncodedParam(\"catlevel2Name\", catlevel2Name);\n                    if (catlevel3Name) {\n                        categoryUrl += \"&\" + getUrlEncodedParam(\"catlevel3Name=\", catlevel3Name);\n                        if (catlevel4Name) {\n                            categoryUrl += \"&\" + getUrlEncodedParam(\"catlevel4Name=\", catlevel4Name);\n                        }\n                    }\n                }\n                requestUrl += categoryUrl;\n                break;\n            case HOME_PAGE:\n                break;\n            default:\n                throw new Error(\"Invalid page type: \" + pageType);\n        }\n\n        requestUrl += \"&uid=\" + userId;\n\n        function renderWidgetDataHorizontal(widget, recommendations, heading) {\n            var maxProducts = horizontalConfig.products.max || horizontalConfig.products.max_products;\n            var targetDOMElementId = widget;\n            var clickHandler = itemClickHandler;\n            if (recommendations.length) {\n                if (maxProducts < recommendations.length) {\n                    recommendations = recommendations.splice(0, maxProducts);\n                }\n                var options = {\n                    template: horizontalTemplate,\n                    targetDOMElementId: targetDOMElementId,\n                    recommendations: recommendations,\n                    heading: heading,\n                    rexConsoleConfigs: horizontalConfig,\n                    assets: horizontalAssets,\n                    maxProducts: maxProducts,\n                    clickHandler: clickHandler,\n                    dataParser: dataParser,\n                    sliderClass: \"_unbxd_recs-slider\",\n                    compressedStyle: compressedStyle\n                }\n                _unbxd_generateRexContent(options);\n            }\n        }\n\n\n        function renderWidgetDataVertical(widget, recommendations, heading) {\n            var maxProducts = verticalConfig.products.max || verticalConfig.products.max_products;\n            var targetDOMElementId = widget;\n            var clickHandler = itemClickHandler;\n            if (recommendations.length) {\n                if (maxProducts < recommendations.length) {\n                    recommendations = recommendations.splice(0, maxProducts);\n                }\n\n                var options = {\n                    template: verticalTemplate,\n                    targetDOMElementId: targetDOMElementId,\n                    recommendations: recommendations,\n                    heading: heading,\n                    rexConsoleConfigs: verticalConfig,\n                    assets: verticalAssets,\n                    maxProducts: maxProducts,\n                    clickHandler: clickHandler,\n                    dataParser: dataParser,\n                    isVertical: true,\n                    sliderClass: \"_unbxd_recs-vertical-slider\",\n                    compressedStyle: compressedStyleVertical\n\n                }\n                _unbxd_generateRexContent(options);\n            }\n        }\n\n        function handleWidgetRenderingVertical() {\n            if (widget3) {\n                var widget3Data = recommendationsResponse.widget3;\n                var widget3Heading = widget3Data.widgetTitle;\n                var widget3Recommendations = widget3Data.recommendations;\n                renderWidgetDataVertical(widget3, widget3Recommendations, widget3Heading);\n            }\n        }\n\n        function handleWidgetRendering() {\n            if (widget1) {\n                var widget1Data = recommendationsResponse.widget1;\n                var widget1Heading = widget1Data.widgetTitle;\n                var widget1Recommendations = widget1Data.recommendations;\n                renderWidgetDataHorizontal(widget1, widget1Recommendations, widget1Heading);\n            }\n            if (widget2) {\n                var widget2Data = recommendationsResponse.widget2;\n                var widget2Heading = widget2Data.widgetTitle;\n                var widget2Recommendations = widget2Data.recommendations;\n                renderWidgetDataHorizontal(widget2, widget2Recommendations, widget2Heading);\n            }\n\n        }\n\n        function horizontalTemplateHandler(err, res) {\n            if (err) {\n                throw new Error('Failed to fetch templates');\n            }\n            // populating the template string\n            horizontalTemplate = res;\n            handleWidgetRendering();\n        }\n\n        function verticalTemplateHandler(err, res) {\n            if (err) {\n                throw new Error('Failed to fetch templates');\n            }\n            // populating the template string\n            verticalTemplate = res;\n            handleWidgetRenderingVertical();\n        }\n\n        /** Fetch recommendations response */\n        // to store recommendations response\n        var recommendationsResponse;\n        // to store template string\n        var horizontalTemplate;\n        // to store vertical template string\n        var verticalTemplate;\n        var compressedStyle;\n        var compressedStyleVertical;\n        fetchData(requestUrl, function (err, res) {\n            // fetching data specific to a page type\n            if (err) {\n                throw new Error('Failed to fetch recommendations');\n            }\n            recommendationsResponse = JSON.parse(res);\n\n            // horizontal templates configuration\n            horizontalTemplate = recommendationsResponse.template.horizontal;\n            if(horizontalTemplate){\n                horizontalConfig = horizontalTemplate.conf;\n                horizontalAssets = horizontalConfig.assets;\n                var templateUrlHorizontal = horizontalTemplate.scriptUrl;\n                if(templateUrlHorizontal){\n                    \n                    /** Fetch template layout string */\n                    fetchData(templateUrlHorizontal, horizontalTemplateHandler);\n                }\n                else{\n                    console.warn(\"script url not found for horizontal template\")\n                }\n            }       \n            // vertical templates configuration\n            verticalTemplate = recommendationsResponse.template.vertical;\n            if(verticalTemplate){\n                verticalConfig = verticalTemplate.conf;\n                verticalAssets = verticalConfig.assets;\n                var templateUrlVertical = verticalTemplate.scriptUrl;\n                if(templateUrlVertical){\n                    /** Fetch vertical template layout string */\n                    fetchData(templateUrlVertical, verticalTemplateHandler);\n                }\n                else{\n                    console.warn(\"script url not found for vertical template\")\n                }\n            }\n        });\n    }\n})(window);\n\n\n","export var getRatings = function(rating){\n        if(isNaN(rating)){\n            console.warn(\"Invalid rating value provided\");\n            return '';\n        }\n        // Divide the rating by 0.5\n        // if the result is an even no e.g 8\n        //  // divide the no by 2. this will be our full stars\n        //  // our empty stars will be 5 - (full stars)\n        // else when the no is odd e.g 7\n        //  // divide the no by 2 and floor the result. This will be the total no of full stars;\n        //  // half star will be one\n        //  // empty stars will be 5 - (full stars + half stars)\n        var result = rating / 0.5;\n        var fullStars=0;\n        var halfStars =0;\n        var emptyStars = 0;\n        var resultString = '';\n        if(result % 2 !== 0){\n            halfStars = 1;\n        }\n        fullStars = Math.floor(result / 2);\n        emptyStars = 5 - (fullStars + halfStars); \n        for(var i=0; i< fullStars; i++){\n            resultString += '<span class=\"_unbxd_rex-full-star recs-star _unbxd_rating-item\"></span>';\n        }\n        for(var i=0; i< halfStars; i++){\n            resultString += '<span class=\"_unbxd_rex-half-star recs-star _unbxd_rating-item\"></span>';\n        }\n        for(var i=0; i< emptyStars; i++){\n            resultString += '<span class=\"_unbxd_rex-empty-star recs-star _unbxd_rating-item\"></span>';\n        }\n        return resultString;\n}\n\nfunction getRatingValuePrefixed(recommendation, ratingConfig, productAttributeKey){\n    return \"<span class='_unbxd-rating-value-container'><span class='_unbxd-rating-value-prefix _unbxd_rating-item'>\"+\n          ratingConfig.prefix.text + \"</span><span class='_unbxd-rating-value'>\"\n          +  recommendation[productAttributeKey]\n          + \"</span></span>\"\n}\n\nfunction styleRatingValue(domSelector, ratingConfig){\n    setTimeout(function(){\n        var prefixItemsStyles = document.querySelectorAll(domSelector + \" ._unbxd-rating-value-prefix\");\n        var valueItemStyles = document.querySelectorAll(domSelector + \" ._unbxd-rating-value\");\n        for(var i=0; i< prefixItemsStyles.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(ratingConfig.prefix.styles);\n                for(var j=0; j<stylesArr.length; j++){\n                    prefixItemsStyles[index].style[stylesArr[j]] = ratingConfig.prefix.styles[stylesArr[j]];\n                }\n            })(i);\n            (function(index){\n                var stylesArr = Object.keys(ratingConfig.value.styles);\n                for(var j=0; j<stylesArr.length; j++){\n                    valueItemStyles[index].style[stylesArr[j]] = ratingConfig.value.styles[stylesArr[j]];\n                }\n            })(i);\n        }\n    },0);\n}\n\n\nexport var getRatingContent = function(recommendation, ratingConfig, domSelector, productAttributeKey){\n    if (!recommendation[productAttributeKey]) {\n        return;\n    }\n    var ratingData=\"\";\n    // if type selected is value only\n        if(ratingConfig.type === \"value\"){\n           ratingData = getRatingValuePrefixed(recommendation, ratingConfig, productAttributeKey);\n           styleRatingValue(domSelector, ratingConfig);\n        }\n    // if type selected is image only\n        else if(ratingConfig.type === \"image\"){\n           ratingData = getRatings(recommendation[productAttributeKey])\n        }\n    // else both\n        else{\n            // if image comes first\n            if(ratingConfig.sequence[0] === \"image\"){\n                ratingData = getRatings(recommendation[productAttributeKey]) +\n                \"<br>\" +\n                getRatingValuePrefixed(recommendation, ratingConfig, productAttributeKey);\n            }\n            // else \n            else{\n                ratingData = getRatingValuePrefixed(recommendation, ratingConfig, productAttributeKey) +\n                \"<br>\" +\n                getRatings(recommendation[productAttributeKey]);\n            }\n            styleRatingValue(domSelector, ratingConfig);\n        }\n     \n    return ratingData;  \n}\n","export var strikeThrough = function (recommendation, config, domSelector) {\n    var strikeConfigObj = config.products.strike_price_feature;\n    var displayPriceObj = strikeConfigObj.new\n    var strikeThroughObj = strikeConfigObj.old;\n    var discountObj = strikeConfigObj.discount;\n    var oldPrice = recommendation[strikeThroughObj.field];\n    var oldPricePrefObject = strikeThroughObj.prefix;\n    var currentPrice = recommendation[displayPriceObj.field];\n    // if old price exists\n    var priceHtml = \"\";\n    if(oldPrice && oldPrice > currentPrice){\n      priceHtml = \"<p class='_unbxd_strike_through_container'><span class='_unbxd_strike_through_prefix'>\"+ oldPricePrefObject.text+\"</span><span class='_unbxd_strike_through_text'>\" + config.products.currency +  oldPrice +\"</span></p>\";\n      priceHtml += \"<p class='_unbxd_original_price_container'>\"+ displayObjectText(displayPriceObj)+\n        displayOriginalPrice(config, currentPrice) +    \n        \"</p>\" + displayDiscountText(discountObj, oldPrice, currentPrice, config, domSelector);\n      // calling paint and reflow for original and old price  \n      styleStrikeThroughItems(config, domSelector);\n    }\n    else{\n      priceHtml = \"<p class='_unbxd_original_price_container'>\"+config.products.currency+ currentPrice +\"</p>\"\n    }\n    return priceHtml;\n}\n\nfunction displayOriginalPrice(config, currentPrice){\n    return \"<span class='_unbxd_original_price_value'>\"+config.products.currency+ currentPrice+\"</span>\";\n}\n\nfunction displayObjectText(displayPriceObj){\n    if(displayPriceObj.prefix.text){\n        return \"<span class='_unbxd_item_display_text'>\"+ displayPriceObj.prefix.text +\"</span>\";\n    }\n    return \"\";\n}\n\nfunction displayDiscountText(discountObj, oldPrice, newPrice, config, domSelector){\n    var discountHtml = \"\";\n    if(discountObj.enabled){\n        var mode = discountObj.mode;\n        var discountVal = 0;\n        if(mode == \"percentage\"){\n            var discPercent = ((oldPrice - newPrice)/ oldPrice) * 100;\n            discountVal = discPercent % 1 === 0 ? discPercent : parseFloat(discPercent).toFixed(2);\n            discountVal += \"%\";\n        }\n        else{\n            var discVal = oldPrice - newPrice;\n            discVal = discVal % 1 === 0 ? discVal : parseFloat(discVal).toFixed(2);\n            discountVal = config.products.currency+ discVal;\n        }\n        if(discountObj.prefix.text){ \n            discountHtml = \"<p class='_unbxd_item_discount_text'>\"+\"<span class='_unbxd_discount_text_label'>\"+\n            discountObj.prefix.text+\"</span>\"+\"<span class='_unbxd_discount_text_val'>\"+discountVal+\"</span></p>\"\n            // calling paint and reflow for discounted price\n            styleDiscountedLabels(config, domSelector);\n        }\n        else{\n            discountHtml =  \"<p class='_unbxd_discount_text_val'>\"+discountVal+\"</p>\"\n        }\n    }\n    return discountHtml;\n}\n\nfunction styleStrikeThroughItems(config, domSelector){\n    setTimeout(function(){\n        var strikethroughItems = document.querySelectorAll(domSelector+\" ._unbxd_strike_through_text\");\n        var strikethroughPrefixes =  document.querySelectorAll(domSelector+ \" ._unbxd_strike_through_prefix\");\n        var strikedObjConfStyles = config.products.strike_price_feature.old.value.styles; \n        var strikedPrefixStlyes =  config.products.strike_price_feature.old.prefix.styles;\n        for(var i=0; i<strikethroughItems.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(strikedObjConfStyles);\n                for(var j=0; j<stylesArr.length; j++){\n                    strikethroughItems[index].style[stylesArr[j]] = strikedObjConfStyles[stylesArr[j]];\n                }\n            })(i);\n        }\n        for(var i=0; i<strikethroughPrefixes.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(strikedPrefixStlyes);\n                for(var j=0; j<stylesArr.length; j++){\n                    strikethroughPrefixes[index].style[stylesArr[j]] = strikedPrefixStlyes[stylesArr[j]];\n                }\n            })(i);\n        }\n    },0);\n    \n    setTimeout(function(){\n        var originalItems = document.querySelectorAll(domSelector+ \" ._unbxd_original_price_value\");\n        var originalConfStyles = config.products.strike_price_feature.new.value.styles;      \n        var originalItemsPrefix = document.querySelectorAll(domSelector + \" ._unbxd_item_display_text\");\n        var originalPrefixConfStyles = config.products.strike_price_feature.new.prefix.styles;       \n        for(var i=0; i<originalItems.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(originalConfStyles);\n                for(var j=0; j<stylesArr.length; j++){\n                    originalItems[index].style[stylesArr[j]] = originalConfStyles[stylesArr[j]];\n                }\n            })(i);\n        }\n        for(var i=0; i<originalItemsPrefix.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(originalPrefixConfStyles);\n                for(var j=0; j<stylesArr.length; j++){\n                    originalItemsPrefix[index].style[stylesArr[j]] = originalPrefixConfStyles[stylesArr[j]];\n                }\n            })(i);\n        }\n    }, 0);\n}\n\nfunction styleDiscountedLabels(config, domSelector){\n    setTimeout(function(){\n        var discountedLabels = document.querySelectorAll(domSelector+\" ._unbxd_discount_text_val\");\n        var discountedObjConfStyles = config.products.strike_price_feature.discount.value.styles;\n        var discountedLabelsPrefix = document.querySelectorAll(domSelector+\" ._unbxd_discount_text_label\");\n        var discountedObjPrefixConfStyles = config.products.strike_price_feature.discount.prefix.styles;\n        for(var i=0; i<discountedLabels.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(discountedObjConfStyles);\n                for(var j=0; j<stylesArr.length; j++){\n                    discountedLabels[index].style[stylesArr[j]] = discountedObjConfStyles[stylesArr[j]];\n                }\n            })(i);\n        }\n        for(var i=0; i<discountedLabelsPrefix.length; i++){\n            (function(index){\n                var stylesArr = Object.keys(discountedObjPrefixConfStyles);\n                for(var j=0; j<stylesArr.length; j++){\n                    discountedLabelsPrefix[index].style[stylesArr[j]] = discountedObjPrefixConfStyles[stylesArr[j]];\n                }\n            })(i);\n        }\n    }, 0);\n    \n}"],"sourceRoot":""}